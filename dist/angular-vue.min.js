!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("angular"),require("lodash"),require("Vue")):"function"==typeof define&&define.amd?define(["angular","lodash","Vue"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).angular,t._,t.Vue)}(this,(function(t,n,r){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=e(t),a=e(n),u=e(r);function i(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return c(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}var f={parent:l,parents:function(t){var n=[],r=l(t);for(;r;)n.push(r),r=l(r);return n},leaf:function(t){return s(t).pop()},root:function(t){return s(t)[0]},isRoot:function(t){return 1===s(t).length}};function l(t){var n=s(t);return n.pop(),function(t){return t.join(".")}(n)}function s(t){if(!t)throw new Error("Invalid path ".concat(t));return t.split(".")}var p={register:function(t){t.directive("vue",[function(){return{restrict:"A",terminal:!0,priority:1001,link:function(r,e,o){var c=function(n){var r,e=/^&([a-z$_][a-z0-9$_]*)$/i,o=(null!==(r=n.vueExpose)&&void 0!==r?r:"").split(",").map((function(t){return t.trim()})).filter((function(t){return e.test(t)})).map((function(t){return t.replace(e,"$1")})),u=/^(?:v-on:|@)[a-z-]+(:[a-z0-9-]+)?(\.[a-z0-9-]+)*/i,i=/^([a-z_$][a-z0-9_$]*)(?:\(\))?$/i,c=t(n);return a.default.forEach(c,(function(t,n){u.test(n)&&i.test(t)&&o.push(t.replace(i,"$1"))})),o}(o),l=function(n){var r,e=/^(?:v-model|v-html|v-text|v-show|v-class|v-attr|v-style|v-if)(?:\.[a-z0-9]+)*$/i,o=/^(?:v-bind)?:[a-z-]+(\.[a-z]+)*$/i,u=/^[a-z$_][a-z0-9$_]*(\.[a-z$_][a-z0-9$_]*)*$/i,c=(null!==(r=n.vueExpose)&&void 0!==r?r:"").split(",").map((function(t){return t.trim()})).filter((function(t){return u.test(t)})),l=t(n);a.default.forEach(l,(function(t,n){(o.test(n)||e.test(n))&&u.test(t)&&c.push(t)}));var s=i(c);return c.forEach((function(t){s=a.default.union(s,f.parents(t))})),a.default(s).uniq().sort().value()}(o),s=function(n){var r=/^(?:v-model)$/i,e=/^(?:v-bind)?:([a-z-]+)\.sync*$/i,o=/^[a-z$_][a-z0-9$_]*(\.[a-z$_][a-z0-9$_]*)*$/i,u={},i=t(n);return a.default.forEach(i,(function(t,n){if(r.test(n)){var a="value";if(!o.test(t))throw Error("Unsupported v-model binding value: ".concat(t));u[a]=t}if(e.test(n)){var i=n.replace(e,"$1").replace(/-[a-z]/g,(function(t){return t[1].toUpperCase()})).replace(/^[A-Z]/,(function(t){return t[1].toLowerCase()}));if(!o.test(t))throw Error("Unsupported v-bind:".concat(i,".sync binding value: ").concat(t));u[i]=t}})),u}(o);l.forEach((function(t){return n(r,t)})),c.forEach((function(t){return n(r,t)}));var p={},v={};l.filter(f.isRoot).forEach((function(t){p[t]=r.$eval(t)})),c.forEach((function(t){v[t]=function(){for(var n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];console.log("Calling ng delegate: ".concat(t,"()")),r.$apply((function(){return r.$eval(t).apply(r,e)}))}}));var d=new u.default({components:r.$vueComponents,data:p,methods:v}).$mount(e[0]);l.forEach((function(t){var n=t;r.$watch(t,(function(r){console.log("ng(".concat(t,") => vue(").concat(n,") ="),r);var e=d,o=n;f.isRoot(o)||(e=a.default.get(d,f.parent(o)),o=f.leaf(o)),u.default.set(e,o,r)}))})),a.default.forEach(s,(function(t,n){d.$children.forEach((function(e){return e.$on("update:".concat(n),(function(e){console.log("vue(".concat(n,") => ng(").concat(t,") ="),e),r.$apply((function(){return a.default.set(r,t,e)}))}))}))}))}};function t(t){var n={};return a.default.forEach(t.$attr,(function(r,e){var o=t[e];n[r]=o})),n}function n(t,n){if(void 0===t.$eval(n))throw Error('"'.concat(n,'" is not defined on parent scope'))}}])}};var v=o.default.module("angularVue",[]);p.register(v)}));
//# sourceMappingURL=angular-vue.min.js.map
